<!DOCTYPE html>
<html>
<head>
  <title>cool computer cube computations (CCCC)</title>
</head>
<body>
  <div class="container">
    <h1>This is a cube solver</h1>
    <div class="card">
      <p>Here is some information</p>
    </div>
  </div>
	<script src="{{ url_for('static', filename='libs/three.min.js') }}"></script>
  <script>
let camera, scene, renderer;
let geometries = [];
let materials = [];
let meshes = [];
let dims = [2, 4];
let w = 0.3;
let translates = [[-w/2, -w/2, +w/2], [-w/2, w/2, +w/2], [w/2, w/2, +w/2], [w/2, -w/2, +w/2],
                  [-w/2, -w/2, -w/2], [-w/2, w/2, -w/2], [w/2, w/2, -w/2], [w/2, -w/2, -w/2]];
const COLORS = [0x4286f4, 0xdb2f04, 0x04db2f, 0xeff707, 0xf78307, 0xffffff];
const ORIGIN = new THREE.Vector3(0,0,0);

init();
animate();

function init() {
  camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 0.01, 10 );
  camera.position.z = 1;

  scene = new THREE.Scene();

  for (let i = 0; i < dims[0]; i++)
  {
    geometries.push([]);
    materials.push([]);
    meshes.push([]);
    for (let k = 0; k < dims[1]; k++)
    {
      geometries[i].push(new THREE.BoxGeometry(0.1*w, 0.1*w, 0.1*w));
      for (let j = 0; j < geometries[i][k].faces.length/2; j++) {
        geometries[i][k].faces[2*j].color.setHex(COLORS[j]);
        geometries[i][k].faces[2*j+1].color.setHex(COLORS[j]);
      }
      materials[i].push(new THREE.MeshBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } ));

      meshes[i].push(new THREE.Mesh(geometries[i][k], materials[i][k]));
      meshes[i][k].translateX(translates[dims[1]*i+k][0]);
      meshes[i][k].translateY(translates[dims[1]*i+k][1]);
      meshes[i][k].translateZ(translates[dims[1]*i+k][2]);

      scene.add(meshes[i][k]);
    }
  }


  renderer = new THREE.WebGLRenderer( { antialias: true } );
  renderer.setSize( window.innerWidth, window.innerHeight );
  document.body.appendChild( renderer.domElement );
}

function animate() {
  requestAnimationFrame(animate);

  for (let i = 0; i < dims[0]; i++)
  {
    for (let k = 0; k < dims[1]; k++)
    {
      meshes[i][k].rotateX(0.01);
      meshes[i][k].rotateY(0.01);
      meshes[i][k].rotateZ(0.01);
    }
  }

  renderer.render(scene, camera);
}
  </script>

</body>
</html>
